[
    {
        "id": "tabungan_kelas",
        "name": "tabungan_kelas",
        "type": "base",
        "system": false,
        "schema": [
            {
                "name": "nama",
                "type": "text",
                "required": true,
                "options": {
                    "min": 1,
                    "max": 20
                }
            },
            {
                "name": "wali_kelas",
                "type": "relation",
                "required": false,
                "options": {
                    "collectionId": "_pb_users_auth_",
                    "cascadeDelete": false,
                    "maxSelect": 1
                }
            }
        ],
        "listRule": "@request.auth.id != ''",
        "viewRule": "@request.auth.id != ''",
        "createRule": "@request.auth.role = 'admin' || @request.auth.role = 'superadmin'",
        "updateRule": "@request.auth.role = 'admin' || @request.auth.role = 'superadmin'",
        "deleteRule": "@request.auth.role = 'admin' || @request.auth.role = 'superadmin'"
    },
    {
        "id": "tabungan_siswa",
        "name": "tabungan_siswa",
        "type": "base",
        "system": false,
        "schema": [
            {
                "name": "nisn",
                "type": "text",
                "required": true,
                "unique": true,
                "options": {
                    "min": 10,
                    "max": 10
                }
            },
            {
                "name": "nama",
                "type": "text",
                "required": true,
                "options": {
                    "min": 2,
                    "max": 100
                }
            },
            {
                "name": "kelas_id",
                "type": "relation",
                "required": true,
                "options": {
                    "collectionId": "tabungan_kelas",
                    "cascadeDelete": false,
                    "maxSelect": 1
                }
            },
            {
                "name": "saldo_terakhir",
                "type": "number",
                "required": false,
                "options": {
                    "min": 0
                }
            },
            {
                "name": "qr_code",
                "type": "text",
                "required": true,
                "unique": true
            },
            {
                "name": "foto",
                "type": "file",
                "required": false,
                "options": {
                    "maxSelect": 1,
                    "maxSize": 5242880,
                    "mimeTypes": [
                        "image/jpeg",
                        "image/png",
                        "image/webp"
                    ]
                }
            },
            {
                "name": "is_active",
                "type": "bool",
                "required": false
            }
        ],
        "listRule": "@request.auth.id != ''",
        "viewRule": "@request.auth.id != ''",
        "createRule": "@request.auth.role = 'admin' || @request.auth.role = 'superadmin'",
        "updateRule": "@request.auth.id != ''",
        "deleteRule": "@request.auth.role = 'admin' || @request.auth.role = 'superadmin'"
    },
    {
        "id": "tabungan_transaksi",
        "name": "tabungan_transaksi",
        "type": "base",
        "system": false,
        "schema": [
            {
                "name": "siswa_id",
                "type": "relation",
                "required": true,
                "options": {
                    "collectionId": "tabungan_siswa",
                    "cascadeDelete": false,
                    "maxSelect": 1
                }
            },
            {
                "name": "user_id",
                "type": "relation",
                "required": true,
                "options": {
                    "collectionId": "_pb_users_auth_",
                    "cascadeDelete": false,
                    "maxSelect": 1
                }
            },
            {
                "name": "tipe",
                "type": "select",
                "required": true,
                "options": {
                    "values": [
                        "setor",
                        "tarik"
                    ]
                }
            },
            {
                "name": "nominal",
                "type": "number",
                "required": true,
                "options": {
                    "min": 1000
                }
            },
            {
                "name": "status",
                "type": "select",
                "required": true,
                "options": {
                    "values": [
                        "pending",
                        "verified",
                        "rejected"
                    ]
                }
            },
            {
                "name": "catatan",
                "type": "text",
                "required": false,
                "options": {
                    "max": 500
                }
            },
            {
                "name": "verified_by",
                "type": "relation",
                "required": false,
                "options": {
                    "collectionId": "_pb_users_auth_",
                    "cascadeDelete": false,
                    "maxSelect": 1
                }
            },
            {
                "name": "verified_at",
                "type": "date",
                "required": false
            }
        ],
        "listRule": "@request.auth.id != ''",
        "viewRule": "@request.auth.id != ''",
        "createRule": "@request.auth.id != ''",
        "updateRule": "@request.auth.role = 'admin' || @request.auth.role = 'superadmin' || @request.auth.role = 'bendahara'",
        "deleteRule": "@request.auth.role = 'admin' || @request.auth.role = 'superadmin'"
    }
]